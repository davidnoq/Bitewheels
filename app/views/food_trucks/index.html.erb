<% content_for :title, "Food Trucks" %>

<!-- Flash Messages -->
<% if flash[:notice] %>
  <div class="alert alert-success alert-dismissible fade show text-center mx-auto mt-3" style="max-width: 60%;" role="alert">
    <%= flash[:notice] %>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
<% elsif flash[:alert] %>
  <div class="alert alert-danger alert-dismissible fade show text-center mx-auto mt-3" style="max-width: 60%;" role="alert">
    <%= flash[:alert] %>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
<% end %>

<div class=" p-5">
  <!-- Top Section with Heading and Icon -->
  <div class="mb-4">
    <h2 class="fw-bold text-dark d-flex align-items-center justify-content-center">
      <i class="bi bi-truck me-2"></i> Food Trucks - Manage Your Fleet
    </h2>
    <hr class="my-4">
  </div>

  <!-- <div class="text-center mb-4">
    <div class="p-3 bg-light rounded shadow-sm">
      <p class="lead text-muted mb-0">
        <i class="bi bi-info-circle me-2"></i>Here you can view, add, edit, or delete your food trucks. Use the buttons below to manage your fleet effectively.
      </p>
    </div>
  </div> -->
  



  <!-- Food Trucks Section -->
   <div class="container mb-5">
  <% if @food_trucks.any? %>
    <div class="mb-5">
      <div class="d-flex justify-content-between align-items-center mb-4">
  <h3 class="fw-bold ">Your Food Trucks</h3>
  <%= link_to new_food_truck_path, class: "btn btn-primary btn-lg d-flex align-items-center" do %>
    <i class="bi bi-plus me-2"></i> Add New Food Truck
  <% end %>
</div>
      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">
        <% @food_trucks.each do |food_truck| %>
          <div class="col">
            <!-- Food Truck Card -->
            <div class="card h-100 shadow-sm">
              <div class="card-body d-flex flex-column">
                <!-- Food Truck Name -->
                <h4 class="card-title text-left fw-bold text-dark"><%= food_truck.name %></h4>

                <!-- Cuisine -->
                <p class="card-text text-left text-muted">
                  <strong>Cuisine:</strong> <%= food_truck.cuisine %>
                </p>

                <!-- Action Dropdown -->
                <!-- Last Updated -->
                <small class="card-text text-left text-muted mt-3">Last Updated <%= time_ago_in_words(food_truck.updated_at) %> ago</small>
                <div class="mt-3 text-left">
                  <div class="dropdown">
                    <button class="btn btn-outline-primary btn-sm dropdown-toggle" type="button" id="dropdownMenuButton<%= food_truck.id %>" data-bs-toggle="dropdown" aria-expanded="false">
                      Manage
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton<%= food_truck.id %>">
                      <li><%= link_to "View", food_truck_path(food_truck), class: "dropdown-item" %></li>
                      <li><%= link_to "Edit", edit_food_truck_path(food_truck), class: "dropdown-item" %></li>
                      <li><%= link_to "Delete", food_truck_path(food_truck), method: :delete, data: { confirm: "Are you sure you want to delete this food truck?" }, class: "dropdown-item text-danger" %></li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>

      <!-- Pagination -->
      <div class="d-flex justify-content-center mt-4">
        <%= paginate @food_trucks, param_name: :food_trucks_page %>
      </div>
    </div>
  <% else %>
    <!-- No Food Trucks Message -->
    <div class="text-center">
      <i class="bi bi-truck fa-3x text-muted mb-3"></i>
      <p class="text-muted">You have no registered food trucks. Add one to get started!</p>
    </div>
  <% end %>
  </div>
</div>
